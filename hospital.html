<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Appointment Booking</title>
    <link rel="stylesheet" href="Hstyle.css">
</head>
<body>
    <header>
        <h1>üè• Hospital Appointment Booking</h1>
        <p>Book your appointment with ease</p>
    </header>

    <main>
        <div class="container">
            
            <div class="progress-steps">
                <div class="step active" data-step="1">
                    <span class="step-number">1</span>
                    <span class="step-text">Patient Info</span>
                </div>
                <div class="step" data-step="2">
                    <span class="step-number">2</span>
                    <span class="step-text">Select Doctor</span>
                </div>
                <div class="step" data-step="3">
                    <span class="step-number">3</span>
                    <span class="step-text">Date & Time</span>
                </div>
                <div class="step" data-step="4">
                    <span class="step-number">4</span>
                    <span class="step-text">Confirm</span>
                </div>
            </div>

            
            <div class="form-container">
                
                <section class="form-step active" id="step1">
                    <h2>Patient Information</h2>
                    <form id="patientForm">
                        <div class="form-group">
                            <label for="fullName">Full Name *</label>
                            <input type="text" id="fullName" name="fullName" required placeholder="Enter your full name">
                            <span class="error-message" id="fullNameError"></span>
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" name="email" required placeholder="Enter your email">
                            <span class="error-message" id="emailError"></span>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number *</label>
                            <input type="tel" id="phone" name="phone" required placeholder="Enter your phone number">
                            <span class="error-message" id="phoneError"></span>
                        </div>
                        <div class="form-group">
                            <label for="age">Age *</label>
                            <input type="number" id="age" name="age" required min="1" max="150" placeholder="Enter your age">
                            <span class="error-message" id="ageError"></span>
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender *</label>
                            <select id="gender" name="gender" required>
                                <option value="">Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                            <span class="error-message" id="genderError"></span>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-next" onclick="nextStep(1)">Next: Select Doctor</button>
                        </div>
                    </form>
                </section>

                
                <section class="form-step" id="step2">
                    <h2>Select a Doctor</h2>
                    <div class="form-group">
                        <label for="specialization">Specialization *</label>
                        <select id="specialization" name="specialization" required>
                            <option value="">Select Specialization</option>
                            <option value="cardiology">Cardiology</option>
                            <option value="dermatology">Dermatology</option>
                            <option value="neurology">Neurology</option>
                            <option value="orthopedics">Orthopedics</option>
                            <option value="pediatrics">Pediatrics</option>
                            <option value="general">General Medicine</option>
                            <option value="gynecology">Gynecology</option>
                            <option value="psychiatry">Psychiatry</option>
                            <option value="ophthalmology">Ophthalmology</option>
                            <option value="dentistry">Dentistry</option>
                            <option value="ent">ENT (Ear, Nose & Throat)</option>
                        </select>
                        <span class="error-message" id="specializationError"></span>
                    </div>
                    <div class="doctors-grid" id="doctorsList">
                        
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-prev" onclick="prevStep(2)">Previous</button>
                        <button type="button" class="btn btn-next" onclick="nextStep(2)">Next: Select Date & Time</button>
                    </div>
                </section>

                
                <section class="form-step" id="step3">
                    <h2>Select Date & Time</h2>
                    <div class="form-group">
                        <label for="appointmentDate">Appointment Date *</label>
                        <input type="date" id="appointmentDate" name="appointmentDate" required>
                        <span class="error-message" id="appointmentDateError"></span>
                    </div>
                    <div class="time-slots">
                        <label>Available Time Slots *</label>
                        <div class="slots-grid" id="timeSlots">
                            
                        </div>
                        <span class="error-message" id="timeSlotError"></span>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-prev" onclick="prevStep(3)">Previous</button>
                        <button type="button" class="btn btn-next" onclick="nextStep(3)">Next: Confirm</button>
                    </div>
                </section>

               
                <section class="form-step" id="step4">
                    <h2>Confirm Your Appointment</h2>
                    <div class="confirmation-details" id="confirmationDetails">
                        
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-prev" onclick="prevStep(4)">Previous</button>
                        <button type="button" class="btn btn-confirm" onclick="confirmAppointment()">Confirm Appointment</button>
                    </div>
                </section>

                
                <section class="form-step" id="successStep">
                    <div class="success-message">
                        <div class="success-icon">‚úì</div>
                        <h2>Appointment Booked Successfully!</h2>
                        <p>Your appointment has been confirmed. You will receive a confirmation email shortly.</p>
                        <div class="booking-reference" id="bookingReference"></div>
                        <button type="button" class="btn btn-primary" >Book Another Appointment</button>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2026 Hospital Appointment System. All rights reserved.</p>
    </footer>

    <script>
        
const doctors = {
    cardiology: [
        { id: 1, name: 'Dr. Sarah Johnson', experience: '15 years', avatar: 'SJ' },
        { id: 2, name: 'Dr. Michael Chen', experience: '12 years', avatar: 'MC' },
        { id: 3, name: 'Dr. Emily Williams', experience: '8 years', avatar: 'EW' },
        { id: 4, name: 'Dr. Rajesh Kumar', experience: '20 years', avatar: 'RK' }
    ],

    dermatology: [
        { id: 5, name: 'Dr. Lisa Anderson', experience: '10 years', avatar: 'LA' },
        { id: 6, name: 'Dr. James Brown', experience: '7 years', avatar: 'JB' },
        { id: 7, name: 'Dr. Neha Verma', experience: '9 years', avatar: 'NV' }
    ],

    neurology: [
        { id: 8, name: 'Dr. Robert Taylor', experience: '18 years', avatar: 'RT' },
        { id: 9, name: 'Dr. Amanda Martinez', experience: '14 years', avatar: 'AM' },
        { id: 10, name: 'Dr. Suresh Iyer', experience: '22 years', avatar: 'SI' }
    ],

    orthopedics: [
        { id: 11, name: 'Dr. David Lee', experience: '16 years', avatar: 'DL' },
        { id: 12, name: 'Dr. Jennifer White', experience: '11 years', avatar: 'JW' },
        { id: 13, name: 'Dr. Christopher Davis', experience: '9 years', avatar: 'CD' }
    ],

    pediatrics: [
        { id: 14, name: 'Dr. Maria Garcia', experience: '13 years', avatar: 'MG' },
        { id: 15, name: 'Dr. Kevin Wilson', experience: '6 years', avatar: 'KW' },
        { id: 16, name: 'Dr. Ananya Rao', experience: '8 years', avatar: 'AR' }
    ],

    general: [
        { id: 17, name: 'Dr. Patricia Moore', experience: '20 years', avatar: 'PM' },
        { id: 18, name: 'Dr. Thomas Jackson', experience: '17 years', avatar: 'TJ' },
        { id: 19, name: 'Dr. Nancy Thompson', experience: '10 years', avatar: 'NT' }
    ],

    gynecology: [
        { id: 20, name: 'Dr. Priya Sharma', experience: '14 years', avatar: 'PS' },
        { id: 21, name: 'Dr. Olivia Harris', experience: '11 years', avatar: 'OH' }
    ],

    psychiatry: [
        { id: 22, name: 'Dr. Daniel Lewis', experience: '16 years', avatar: 'DL' },
        { id: 23, name: 'Dr. Meera Nair', experience: '12 years', avatar: 'MN' }
    ],

    ophthalmology: [
        { id: 24, name: 'Dr. William Scott', experience: '19 years', avatar: 'WS' },
        { id: 25, name: 'Dr. Kavita Joshi', experience: '10 years', avatar: 'KJ' }
    ],

    dentistry: [
        { id: 26, name: 'Dr. Andrew Miller', experience: '9 years', avatar: 'AM' },
        { id: 27, name: 'Dr. Pooja Malhotra', experience: '7 years', avatar: 'PM' }
    ],

    ent: [
        { id: 28, name: 'Dr. Henry Clark', experience: '15 years', avatar: 'HC' },
        { id: 29, name: 'Dr. Sunita Patel', experience: '13 years', avatar: 'SP' }
    ]
};



const timeSlots = [
    '09:00 AM', '09:30 AM', '10:00 AM', '10:30 AM',
    '11:00 AM', '11:30 AM', '02:00 PM', '02:30 PM',
    '03:00 PM', '03:30 PM', '04:00 PM', '04:30 PM'
];


let currentStep = 1;
let selectedDoctor = null;
let selectedTimeSlot = null;
let appointmentData = {};


document.addEventListener('DOMContentLoaded', function() {
    
    resetForm();
    initializeDatePicker();
    loadTimeSlots();
    setupEventListeners();
});


function setupEventListeners() {
    
    document.getElementById('specialization').addEventListener('change', function() {
        const specialization = this.value;
        loadDoctors(specialization);
    });

    
    document.getElementById('appointmentDate').addEventListener('change', function() {
        validateDateField();
    });
}


function initializeDatePicker() {
    const dateInput = document.getElementById('appointmentDate');
    const today = new Date().toISOString().split('T')[0];
    dateInput.setAttribute('min', today);
}


function loadDoctors(specialization) {
    const doctorsList = document.getElementById('doctorsList');
    doctorsList.innerHTML = '';
    selectedDoctor = null;

    if (!specialization) {
        doctorsList.innerHTML = '<p class="no-selection">Please select a specialization first</p>';
        return;
    }

    const specializationDoctors = doctors[specialization] || [];
    
    if (specializationDoctors.length === 0) {
        doctorsList.innerHTML = '<p class="no-selection">No doctors available for this specialization</p>';
        return;
    }

    specializationDoctors.forEach(doctor => {
        const card = document.createElement('div');
        card.className = 'doctor-card';
        card.dataset.doctorId = doctor.id;
        card.innerHTML = `
            <div class="doctor-avatar">${doctor.avatar}</div>
            <h3>${doctor.name}</h3>
            <p>Experience: ${doctor.experience}</p>
            <span class="specialty">${capitalizeFirst(specialization)}</span>
        `;
        card.addEventListener('click', () => selectDoctor(doctor, card));
        doctorsList.appendChild(card);
    });
}


function selectDoctor(doctor, card) {
    
    document.querySelectorAll('.doctor-card').forEach(c => c.classList.remove('selected'));
    
    card.classList.add('selected');
    selectedDoctor = doctor;
    
   
    document.getElementById('specializationError').textContent = '';
}


function loadTimeSlots() {
    const slotsContainer = document.getElementById('timeSlots');
    slotsContainer.innerHTML = '';
    selectedTimeSlot = null;

    timeSlots.forEach(slot => {
        const slotElement = document.createElement('div');
        slotElement.className = 'time-slot';
        slotElement.textContent = slot;
        slotElement.dataset.slot = slot;
        
        
        if (Math.random() < 0.3) {
            slotElement.classList.add('unavailable');
        } else {
            slotElement.addEventListener('click', () => selectTimeSlot(slot, slotElement));
        }
        
        slotsContainer.appendChild(slotElement);
    });
}


function selectTimeSlot(slot, element) {
    
    document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
    
    element.classList.add('selected');
    selectedTimeSlot = slot;
    
    
    document.getElementById('timeSlotError').textContent = '';
}


function nextStep(currentStepNum) {
    if (validateStep(currentStepNum)) {
        updateProgressSteps(currentStepNum + 1);
        showStep(currentStepNum + 1);
        currentStep = currentStepNum + 1;
        
        if (currentStepNum === 3) {
            displayConfirmation();
        }
    }
}

function prevStep(currentStepNum) {
    updateProgressSteps(currentStepNum - 1);
    showStep(currentStepNum - 1);
    currentStep = currentStepNum - 1;
}


function showStep(stepNumber) {
    document.querySelectorAll('.form-step').forEach(step => step.classList.remove('active'));
    document.getElementById('step' + stepNumber).classList.add('active');
}


function updateProgressSteps(completedStep) {
    document.querySelectorAll('.step').forEach((step, index) => {
        const stepNum = index + 1;
        step.classList.remove('active', 'completed');
        
        if (stepNum < completedStep) {
            step.classList.add('completed');
        } else if (stepNum === completedStep) {
            step.classList.add('active');
        }
    });
}


function validateStep(stepNumber) {
    let isValid = true;
    
    switch (stepNumber) {
        case 1:
            isValid = validatePatientInfo();
            break;
        case 2:
            isValid = validateDoctorSelection();
            break;
        case 3:
            isValid = validateDateTimeSelection();
            break;
    }
    
    return isValid;
}


function validatePatientInfo() {
    let isValid = true;
    
   
    const fullName = document.getElementById('fullName').value.trim();
    if (!fullName) {
        showError('fullNameError', 'Full name is required');
        isValid = false;
    } else if (fullName.length < 2) {
        showError('fullNameError', 'Full name must be at least 2 characters');
        isValid = false;
    } else {
        clearError('fullNameError');
    }
    
    
    const email = document.getElementById('email').value.trim();
    if (!email) {
        showError('emailError', 'Email is required');
        isValid = false;
    } else if (!isValidEmail(email)) {
        showError('emailError', 'Please enter a valid email address');
        isValid = false;
    } else {
        clearError('emailError');
    }
    
    
    const phone = document.getElementById('phone').value.trim();
    if (!phone) {
        showError('phoneError', 'Phone number is required');
        isValid = false;
    } else if (!isValidPhone(phone)) {
        showError('phoneError', 'Please enter a valid phone number');
        isValid = false;
    } else {
        clearError('phoneError');
    }
    
    
    const age = document.getElementById('age').value.trim();
    if (!age) {
        showError('ageError', 'Age is required');
        isValid = false;
    } else if (parseInt(age) < 1 || parseInt(age) > 150) {
        showError('ageError', 'Please enter a valid age');
        isValid = false;
    } else {
        clearError('ageError');
    }
    
    const gender = document.getElementById('gender').value;
    if (!gender) {
        showError('genderError', 'Please select a gender');
        isValid = false;
    } else {
        clearError('genderError');
    }
    
    if (isValid) {
        appointmentData.patient = {
            fullName,
            email,
            phone,
            age,
            gender
        };
    }
    
    return isValid;
}
function validateDoctorSelection() {
    const specialization = document.getElementById('specialization').value;
    if (!specialization) {
        showError('specializationError', 'Please select a specialization');
        return false;
    }
    
    if (!selectedDoctor) {
        showError('specializationError', 'Please select a doctor');
        return false;
    }
    
    clearError('specializationError');
    appointmentData.doctor = selectedDoctor;
    appointmentData.specialization = specialization;
    return true;
}
function validateDateTimeSelection() {
    const dateInput = document.getElementById('appointmentDate');
    if (!dateInput.value) {
        showError('appointmentDateError', 'Please select an appointment date');
        return false;
    }
    
    if (!validateDateField()) {
        return false;
    }
    
    if (!selectedTimeSlot) {
        showError('timeSlotError', 'Please select a time slot');
        return false;
    }
    clearError('appointmentDateError');
    clearError('timeSlotError');
    appointmentData.date = dateInput.value;
    appointmentData.time = selectedTimeSlot;
    return true;
}
function validateDateField() {
    const dateInput = document.getElementById('appointmentDate');
    
    
    if (!dateInput.value) {
        clearError('appointmentDateError');
        return true; 
    }
    
    const selectedDate = new Date(dateInput.value);
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    
    if (isNaN(selectedDate.getTime())) {
        showError('appointmentDateError', 'Please enter a valid date');
        return false;
    }
    
    if (selectedDate < today) {
        showError('appointmentDateError', 'Please select a future date');
        return false;
    }
    
    clearError('appointmentDateError');
    return true;
}
function displayConfirmation() {
    const confirmationDiv = document.getElementById('confirmationDetails');
    
    confirmationDiv.innerHTML = `
        <h3>Appointment Summary</h3>
        <div class="detail-row">
            <span class="detail-label">Patient Name:</span>
            <span class="detail-value">${appointmentData.patient.fullName}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Email:</span>
            <span class="detail-value">${appointmentData.patient.email}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Phone:</span>
            <span class="detail-value">${appointmentData.patient.phone}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Age:</span>
            <span class="detail-value">${appointmentData.patient.age}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Gender:</span>
            <span class="detail-value">${capitalizeFirst(appointmentData.patient.gender)}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Doctor:</span>
            <span class="detail-value">${appointmentData.doctor.name}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Specialization:</span>
            <span class="detail-value">${capitalizeFirst(appointmentData.specialization)}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Date:</span>
            <span class="detail-value">${formatDate(appointmentData.date)}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Time:</span>
            <span class="detail-value">${appointmentData.time}</span>
        </div>
    `;
}
function confirmAppointment() {
    
    const appointmentPayload = {
        fullName: appointmentData.patient.fullName,
        email: appointmentData.patient.email,
        phone: appointmentData.patient.phone,
        age: parseInt(appointmentData.patient.age),
        gender: appointmentData.patient.gender,
        doctorName: appointmentData.doctor.name,
        specialization: appointmentData.specialization,
        appointmentDate: appointmentData.date,
        appointmentTime: appointmentData.time
    };
    
    
    fetch('http://localhost:3000/api/appointments', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(appointmentPayload)
    })
    .then(response => {
        if (!response.ok) {
            return response.json().then(err => {
                throw new Error(err.message || 'Server error');
            });
        }
        return response.json();
    })
    .then(data => {
        if (data.success) {
            const bookingReference = data.data.bookingReference;
            appointmentData.bookingReference = bookingReference;
            
            document.querySelectorAll('.form-step').forEach(step => step.classList.remove('active'));
            document.getElementById('successStep').classList.add('active');
            document.getElementById('bookingReference').innerHTML = 'Booking Reference: <span>' + bookingReference + '</span>';
            document.querySelectorAll('.step').forEach(step => {
                step.classList.add('completed');
                step.classList.remove('active');
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        } else {
            alert('Error: ' + data.message);
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Failed to book appointment. Please try again.');
    });
}
function resetForm() {
    document.getElementById('patientForm').reset();
    selectedDoctor = null;
    selectedTimeSlot = null;
    appointmentData = {};
    document.getElementById('doctorsList').innerHTML = '<p class="no-selection">Please select a specialization first</p>';
    loadTimeSlots();
    document.querySelectorAll('.step').forEach((step, index) => {
        step.classList.remove('active', 'completed');
        if (index === 0) {
            step.classList.add('active');
        }
    });
    document.querySelectorAll('.form-step').forEach(step => step.classList.remove('active'));
    document.getElementById('step1').classList.add('active');
    currentStep = 1;
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
function showError(elementId, message) {
    const errorElement = document.getElementById(elementId);
    errorElement.textContent = message;
    
    
    const inputId = elementId.replace('Error', '');
    const inputElement = document.getElementById(inputId);
    if (inputElement) {
        inputElement.classList.add('error');
    }
}
function clearError(elementId) {
    const errorElement = document.getElementById(elementId);
    errorElement.textContent = '';
    
    
    const inputId = elementId.replace('Error', '');
    const inputElement = document.getElementById(inputId);
    if (inputElement) {
        inputElement.classList.remove('error');
    }
}
function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}
function isValidPhone(phone) {
    const phoneRegex = /^[0-9]{10,15}$/;
    return phoneRegex.test(phone.replace(/\s/g, ''));
}
function capitalizeFirst(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
}
function formatDate(dateStr) {
    const date = new Date(dateStr);
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    return date.toLocaleDateString('en-US', options);
}
    </script>
</body>
</html>